function playPong(){function v(e){this.h=100;this.w=5;this.color="#444";this.x=e==="left"?0:n-this.w;this.y=r/2-this.h/2}function m(){t.clearRect(0,0,n,r)}function g(){m();y();s.draw(a);a=a+.025;if(b(a)==="1.000"){d=true}k();N()}function y(){for(var e=0,n=o.length;e<n;e++){var r=o[e];t.fillStyle="rgba(0, 0, 0, "+1+")";t.fillRect(r.x,r.y,r.w,r.h)}}function b(e){return e.toFixed(3)}function w(){m();for(var e=0,n=o.length;e<n;e++){var r=o[e];t.fillStyle=r.color;t.fillRect(r.x,r.y,r.w,r.h)}s.draw(1)}function E(t){var n=e.getBoundingClientRect();return{x:t.clientX-n.left,y:t.clientY-n.top}}function S(e){var t=E(e);u.x=t.x;u.y=t.y}function x(){var e=o[0];var t=o[1];if(s.x+s.r>n){s.x=r-s.r;A()}else if(s.x<0){s.x=s.r;A()}else if(s.y+s.r>r){s.vy=-s.vy;s.y=r-s.r}else if(s.y<0){s.vy=-s.vy;s.y=0}else if(s.x-s.r<e.x&&s.y<e.y+e.h&&s.y>e.y){s.vx=-s.vx;s.x=e.x+e.w;T()}else if(s.x+s.r>t.x&&s.y<t.y+t.h&&s.y>t.y){if(s.vx<0){s.vx-=.2}if(s.vx>0){s.vx+=.2}s.vx=-s.vx;s.x=t.x-t.w;T()}}function T(){p++}function N(){t.fillStyle="rgba(150, 150, 150, "+b(a)+")";t.font="30pt Open Sans";t.fillText(p.toString(),n/2,r/2)}function C(){s.x+=s.vx;s.y+=s.vy;k();x()}function k(){if(u.x&&u.y){for(var e=0,t=o.length;e<t;e++){var n=o[e];n.y=u.y-n.h/2}}}function L(){requestAnimFrame(L);if(d){w();C();N()}else{g()}}function A(){s.x=f;s.y=l;s.vx=c;s.vy=h;p=0;a=0;d=false}window.cancelRequestAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout}();window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)}}();var e=document.getElementById("pong");e.addEventListener("mousemove",S,true);var t=e.getContext("2d");var n=e.width;var r=e.height;t.fillRect(0,0,n,r);var i=[];var s={};var o=[];var u={};var a=0;var f=50;var l=50;var c=4;var h=8;var p=0;var d=false;s={x:f,y:l,r:5,vx:4,vy:8,draw:function(e){t.beginPath();var n="rgba(0, 0, 0, "+b(e)+")";t.fillStyle=n;t.arc(this.x,this.y,this.r,0,Math.PI*2,false);t.fill()}};o.push(new v("left"));o.push(new v("right"));L()}$(document).ready(function(){$("#plus-zero").fadeIn("slow");$("#play-pong").click(function(){$("#pong").animate({opacity:"1"},"slow");playPong()})})
